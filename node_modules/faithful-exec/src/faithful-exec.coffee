makePromise = require "make-promise"
exec = require("child_process").exec

module.exports = (command, options = {}) ->
  makePromise (cb) ->
    exec command, options, (err, stdout, stderr) ->
      if err
        err.stdout = stdout
        err.stderr = stderr
        cb err
      else
        cb null,
          stdout: stdout
          stderr: stderr